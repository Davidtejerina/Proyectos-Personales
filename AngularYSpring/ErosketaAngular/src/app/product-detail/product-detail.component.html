<app-menu-nav-bar />
<div class="container">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a [routerLink]="['/all-categories']">Tienda</a></li>
        <li class="breadcrumb-item"><a [routerLink]="['/products-by-category/', product.category.id]">{{ product.category.name }}</a></li>
        <li class="breadcrumb-item active">{{ product.name }}</li>
    </ol>
</div>
<div class="container mt-5 p-4">
    <h2 class="display-5">{{ product.name }}</h2>
    <div class="container mt-4">
        <div class="row">
            <div class="card h-100 d-flex flex-row">
                <div class="col-md-4 m-auto">
                    <img class="card-img-top p-3 m-auto" style="width: 70%" [src]="product.image">
                </div>
                <div class="col-md-8 card-body d-flex flex-column" style="margin-right: 20px;">
                    <h5 class="card-title mt-auto">{{ product.description }}</h5>
                    <hr>
                    <div class="d-flex mt-auto">
                        <p class="card-text mb-0"><strong>{{ product.price }}€</strong></p>
                        <div class="info">
                            <label>Cantidad:</label>
                            <input #cantidadInput type="number" min="1" value="1" [disabled]="!hasStock()"  
                                (input)="disabledbutton(cantidadInput)">
                        </div>
                    </div>
                    <p class="card-text mt-5" [ngClass]="{'text-success': hasStock(), 'text-danger': !hasStock()}">
                        {{ hasStock() ? 'En stock' : 'Sin stock - No hay productos disponibles en este momento' }}
                    </p>
                    <div class="container-button">
                        <button (click)="addToCart(product, cantidadInput.valueAsNumber)" class="btn btn-success"
                            [disabled]="!hasStock() || isDisabled">Añadir al carrito</button>
                        <p *ngIf="isAdded" class="text-success m-auto">({{product.name}} ya añadido al carrito)</p>
                    </div>
                </div> 
            </div>
        </div>
    </div>
</div>